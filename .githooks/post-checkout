#!/bin/sh
# post-checkout hook: copy .env.local from main worktree to current worktree

MAIN_ROOT=$(git rev-parse --git-common-dir | sed 's|/.git$||' | sed 's|/\.git||')
CURRENT_ROOT=$(git rev-parse --show-toplevel)
SRC="$MAIN_ROOT/.env.local"
DEST="$CURRENT_ROOT/.env.local"

if [ "$MAIN_ROOT" = "$CURRENT_ROOT" ]; then
  exit 0
fi

if [ -f "$SRC" ] && [ ! -f "$DEST" ]; then
  cp "$SRC" "$DEST"
  echo "Copied .env.local to worktree: $CURRENT_ROOT"
fi
